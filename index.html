<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Christbahndl Speise- und Getränkekarte</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .container {
      display: flex;
      flex-direction: row;
    }

    .menu {
      flex: 2;
      padding-right: 33.33%;
      /* 1/3 of the container's width */
    }

    .menu-section {
      display: flex;
      flex-wrap: wrap;
      justify-content: start;
    }

    .total {
      position: fixed;
      top: 0;
      right: 0;
      width: 33.33%;
      height: 100%;
      overflow: hidden;
      background: rgba(224, 255, 255, 0.466);
    }

    .total-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #totalPrice {
      font-size: 24px;
      font-weight: bold;
    }

    .fixed-total {
      z-index: 1;
    }

    .scrollable-items {
      overflow-y: auto;
      height: calc(100% - 160px);
      /* Adjust this value */
    }

    .button {
      flex: 1;
      padding: 10px;
      margin: 5px;
      text-align: center;
      font-size: 16px;
    }

    .selected-item {
      display: flex;
      justify-content: space-between;
      margin: 5px;
      padding: 5px;
      border: 1px solid #ccc;
      cursor: pointer;
    }

    .reset-button {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>

<body>

  <div class="container">
    <div class="menu">
      <h2>Getränke</h2>
      <div class="menu-section">
        <button class="button" data-name="Glühwein" data-price="4.00">Glühwein €4,00</button>
        <button class="button" data-name="Orangenpunsch" data-price="4.00">Orangenpunsch €4,00</button>
        <button class="button" data-name="Apfelglühmix" data-price="3.50">Apfelglühmix €3,50</button>
        <button class="button" data-name="+ Rum" data-price="0.50">+ Rum €0,50</button>
        <button class="button" data-name="Kaffee kl" data-price="1.50">Kaffee kl €1,50</button>
        <button class="button" data-name="Kaffee gr" data-price="2.50">Kaffee gr €2,50</button>
        <button class="button" data-name="Schokolade" data-price="3.50">Schokolade €3,50</button>
        <button class="button" data-name="Bier" data-price="4.00">Bier €4,00</button>
        <button class="button" data-name="Cola, Limo, Saft, Tee" data-price="3.00">Cola,&nbsp;Limo, Saft,&nbsp;Tee €3,00</button>
        <button class="button" data-name="Wasser 0,5l" data-price="2.00">Wasser 0,5l €2,00</button>
        <button class="button" data-name="Magdalener Morit" data-price="4.00">Magdalener Morit €4,00</button>
        <button class="button" data-name="Lagrein Eyrl" data-price="4.50">Lagrein Eyrl €4,50</button>
        <button class="button" data-name="Kerner Radoy" data-price="4.50">Kerner Radoy €4,50</button>
        <button class="button" data-name="Cuvée Laven" data-price="4.50">Cuvée Laven €4,50</button>
        <button class="button" data-name="Met" data-price="3.50">Met €3,50</button>
        <button class="button" data-name="Prosecco" data-price="4.00">Prosecco €4,00</button>
        <button class="button" data-name="Bombardino" data-price="4.00">Bombardino €4,00</button>
      </div>

      <h2>Kaution</h2>
      <div class="menu-section">
        <button class="button" data-name="Kaution" data-price="4.00">Kaution €4.00</button>
        <button class="button" data-name="Retour" data-price="-4.00">Retour €-4.00</button>
      </div>

      <h2>Speisen</h2>
      <div class="menu-section">
        <button class="button" data-name="Laugenbrezen" data-price="3.00">Laugenbrezen €3.00</button>
        <button class="button" data-name="belegte Brötchen" data-price="4.00">belegte Brötchen €4.00</button>
        <button class="button" data-name="Gulaschsuppe" data-price="8.00">Gulaschsuppe €8.00</button>
        <button class="button" data-name="Gerstsuppe" data-price="6.00">Gerstsuppe €6.00</button>
        <button class="button" data-name="Schlutzkrapfen" data-price="10.00">Schlutz&#8203;krapfen €10.00</button>
        <button class="button" data-name="Nudel Wildragout" data-price="10.00">Nudel Wildragout €10.00</button>
        <button class="button" data-name="Knödel mit Pilzen" data-price="10.00">Knödel mit Pilzen €10.00</button>
        <button class="button" data-name="Polenta" data-price="10.00">Polenta €10.00</button>
        <button class="button" data-name="Vinschgerle" data-price="7.00">Vinschgerle €7.00</button>
        <button class="button" data-name="Baguette" data-price="7.00">Baguette €7.00</button>
        <button class="button" data-name="Frankfurter" data-price="6.00">Frankfurter €6.00</button>
        <button class="button" data-name="Apfelküchlein" data-price="5.00">Apfelküchlein €5.00</button>
        <button class="button" data-name="Apfelstrudel" data-price="5.00">Apfelstrudel €5.00</button>
        <button class="button" data-name="Hefekrapfen" data-price="3.50">Hefe&#8203;krapfen €3.50</button>
      </div>
      
      <h2>Extra</h2>
      <div class="menu-section">
        <input type="text" id="customPriceInput" placeholder="Preis eingeben" style="margin-right: 10px; flex-grow: 1;">
        <button id="customPriceButton" >Hinzufügen</button>
      </div>

    </div>

    <div class="total">
      <div class="fixed-total">
        <button id="resetButtonTop" class="reset-button">Zurücksetzen</button>
        <div id="totalWrapper" class="total-wrapper">
          <h3>Gesamt:</h3>
          <span id="totalPrice">€0.00</span>
        </div>
      </div>
      <div class="scrollable-items" id="selectedItems"></div>
      <button id="resetButtonBottom" class="reset-button">Zurücksetzen</button>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>

  <script>
    let selectedItems = {};
    let totalPrice = 0;
    let extrasCounter = 0;

    document.querySelectorAll('.button').forEach(button => {
      button.addEventListener('click', function () {
        const itemName = this.getAttribute('data-name');
        const itemPrice = parseFloat(this.getAttribute('data-price'));

        totalPrice += itemPrice;

        if (selectedItems[itemName]) {
          selectedItems[itemName].count++;
        } else {
          selectedItems[itemName] = { count: 1, itemPrice: itemPrice };
        }

        updateUI();
      });
    });

    function updateUI() {
      const selectedItemsDiv = document.getElementById('selectedItems');
      const totalPriceDiv = document.getElementById('totalPrice');

      selectedItemsDiv.innerHTML = '';

      for (const [itemName, itemInfo] of Object.entries(selectedItems)) {
        const div = document.createElement('div');
        div.className = 'selected-item';
        div.innerHTML = `${itemName} x${itemInfo.count} <span>-</span>`;
        div.addEventListener('click', function () {
          itemInfo.count--;
          totalPrice -= itemInfo.itemPrice;

          if (itemInfo.count === 0) {
            delete selectedItems[itemName];
          }

          updateUI();
        });
        selectedItemsDiv.appendChild(div);
      }

      totalPriceDiv.textContent = `€${totalPrice.toFixed(2)}`;
    }

    document.querySelectorAll('.reset-button').forEach(button => {
      button.addEventListener('click', function () {
        selectedItems = {};
        totalPrice = 0;
        extrasCounter = 0; // Reset the Extras counter
        updateUI();
      });
    });


    if ('addEventListener' in document) {
      document.addEventListener('DOMContentLoaded', function () {
        FastClick.attach(document.body);
      }, false);
    }

    document.getElementById('customPriceButton').addEventListener('click', function () {
      const customPriceInput = document.getElementById('customPriceInput');
      const inputValue = customPriceInput.value.trim();

      if (inputValue.toLowerCase() === "marco and ilaria are in love") {
        document.getElementById('easterEggModal').style.display = 'flex'; // Change this line
        customPriceInput.value = ''; // Clear the input field
        return; // Skip adding the price since this is an Easter egg
      }

      const itemPrice = parseFloat(inputValue);

      // Check if the itemPrice is a number and not zero
      if (isNaN(itemPrice) || itemPrice === 0) {
        alert('Bitte geben Sie einen gültigen Preis ein, der nicht null ist.');
        return;
      }

      // Increment the Extras counter
      extrasCounter++;
      const itemName = `Extras ${extrasCounter}`;

      totalPrice += itemPrice;
      selectedItems[itemName] = { count: 1, itemPrice: itemPrice };

      customPriceInput.value = ''; // Clear the input field
      updateUI();
    });

  </script>

  <div id="easterEggModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 1000;">
    <div style="padding: 20px; background: white; border-radius: 5px; text-align: center;">
      <!-- <p style="color: red; font-weight: bold;">Ich weiß! Marco ist Hals über Kopf verliebt.</p>
      <p style="color: red; font-weight: bold;">Heute gibt es deshalb für Ilaria </p>
      <p style="color: red; font-weight: bold;">unbegrenzt Liebespunsch aufs Haus!</p>
      <p style="font-size: 8rem;">❤️</p>
      <p style="color: red; font-weight: bold;">Lasst uns anstoßen: Zum Wohl auf</p>
      <p style="color: red; font-weight: bold;">die Liebe von Marco und Ilaria!</p>
      <p style="color: red; font-weight: bold;">Möge sie ewig blühen und gedeihen!</p> -->
      <p style="color: red; font-weight: bold;">I woas!</p>
      <p style="color: red; font-weight: bold;">Marco isch Hals über Kopf verliab.</p>
      <p style="color: red; font-weight: bold;">Deswegen gibs hait fir die fesche Ilaria </p>
      <p style="color: red; font-weight: bold;">unbegrenztn Liebespunsch aufs Haus!</p>
      <p style="font-size: 8rem;">❤️</p>
      <p style="color: red; font-weight: bold;">Zum Wohl af die Liebe</p>
      <p style="color: red; font-weight: bold;">von Marco und Ilaria!</p>
      <p style="color: red; font-weight: bold;">Auf dass sie ewig bliant und gedeiht.</p>
      <button onclick="document.getElementById('easterEggModal').style.display='none'">Schließen</button>
    </div>
  </div>
</body>

</html>